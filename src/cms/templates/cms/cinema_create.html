{% extends "cms/statistics.html" %}
{% load django_tables2 %}

{% block content %}



<form action="{% url 'cinema_create' %}" method="post" enctype="multipart/form-data">

    {% csrf_token %}

    <div class="p-2">
            <div class=" col d-flex justify-content-end ">
                <div class="btn-group btn-group-toggle" data-toggle="buttons">
                    <label class="btn btn-secondary active">
                        <input type="radio" name="options" id="option1" checked> RUS
                    </label>
                    <label class="btn btn-secondary">
                        <input type="radio" name="options" id="option2"> ENG
                    </label>
                </div>

        </div>

        <div class="row">
            <div class="col-md-4">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text" id="inputGroup-sizing-default">Название кинотеатра</span>
                    </div>
                    {{ cinema_form.title }}
<!--                    <input type="text" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">-->
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Описание</span>
                    </div>
                    {{cinema_form.description }}

                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Условия</span>
                    </div>
                    {{cinema_form.conditions}}
                </div>
            </div>
        </div>


        <div class="row">
            <div  class="col-md-2">

              <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Логотип</span>
                    </div>
              </div>
            </div>

            <div class="card col-md-2" style="width: 20rem;">
                <img id="mainImagePreview" src="https://www.nomadfoods.com/wp-content/uploads/2018/08/placeholder-1-e1533569576673-960x960.png"  class="card-img-top"  alt="">
            </div>


            <div  class="col-md-2">
                <button type="button"  id="uploadLogoBtn" class="btn btn-success">Загрузить</button>
            </div>

            <div  class="col-md-2">
               <button type="button" id="deleteLogoBtn" class="btn btn-danger">Удалить</button>
            </div>
            {{ cinema_form.main_image }}
        </div>


       <div class="row">
    <div class="col-md-2">
        <div class="input-group mb-3">
            <div class="input-group-prepend">
                <span class="input-group-text">Фото верхнего баннера</span>
            </div>
        </div>
    </div>

    <div class="card col-md-2" style="width: 20rem;">
        <img id="previewBanner" src="https://www.nomadfoods.com/wp-content/uploads/2018/08/placeholder-1-e1533569576673-960x960.png" class="card-img-top" alt="">
    </div>

    <div class="col-md-2 d-flex align-items-center">
        <button type="button" id="uploadBannerBtn" class="btn btn-success">Загрузить</button>
    </div>

    {{ cinema_form.image_top_banner }} <!-- Django вставит скрытый FileInput -->

    <div class="col-md-2 d-flex align-items-center">
        <button type="button" id="deleteBannerBtn" class="btn btn-danger">Удалить</button>
    </div>
</div>





<!--Болки галерея картинок &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->
        <div class="row">
            <div class="col-md-2">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">Галерея картинок:</span>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-2 ">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text ">Размер: 1000х190</span>
                    </div>
                </div>
            </div>

            <div class="col-md-10">
                <div class="row">
                    {% for i in image_num %}
                    <div class="col-md-2">

                        <div  class="d-flex align-items-center ">
                            <button type="button" class="btn btn-danger w-100 ">Удалить</button>
                        </div>
                        <img id='previewBanner' src="https://www.nomadfoods.com/wp-content/uploads/2018/08/placeholder-1-e1533569576673-960x960.png" class="card-img-top" alt="...">
                        <div  class="d-flex align-items-center ">
                            <button type="button" id="uploadBannerBtn" class="btn btn-success  w-100">Загрузить</button>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

<!--Закрыл блоки галерея картинок &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;-->


        <div class="text-center mt-5">
            <h1>Список залов</h1>
        </div>

        <div class="card-body ml-5">
        {% render_table hall_table %}
        </div>



        <div class="row mt-4">
            <div class="col-md-12 d-flex justify-content-center mt-5">

                <button type="submit" class="btn btn-primary">
                    Создать зал
                </button>
            </div>
        </div>


        <div class="row mt-5">
            <div class="col-md-12">
                <div class="input-group mb-3">
                    <div class="input-group-prepend">
                        <span class="input-group-text">SEO Блок:</span>
                    </div>
                    <div class="d-flex flex-column align-items-center w-100">

                        <div class="mb-2 w-50 text-center">
                            {{ seo_form.url.placeholder }}
                            <div class="mb-2 w-100 d-flex align-items-center justify-content-center">
                                <span class="me-2 mr-2 text-muted">{{ seo_form.url.label }}</span>


                                {{ seo_form.url }}
                            </div>
                        </div>

                        <div class="mb-2 w-50 text-center">
                            {{ seo_form.title.placeholder }}
                            <div class="mb-2 w-100 d-flex align-items-center justify-content-center">
                                <span class="me-2 mr-2 text-muted">{{seo_form.title.label}}</span>
                                {{ seo_form.title }}
                            </div>
                        </div>


                        <div class="mb-2 w-50 text-center">
                            {{ seo_form.key_words.placeholder }}
                            <div class="mb-2 w-100 d-flex align-items-center justify-content-center">
                                <span class="me-2 mr-2 text-muted">{{seo_form.key_words.label}}</span>
                                {{ seo_form.key_words }}
                            </div>
                        </div>


                         <div class="mb-2 w-50 text-center">
                            {{ seo_form.description.placeholder }}
                            <div class="mb-2 w-100 d-flex align-items-center justify-content-center">
                                <span class="me-2 mr-2 text-muted">{{seo_form.description.label}}</span>
                                {{ seo_form.description }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="row mt-4">
            <div class="col-md-12 d-flex justify-content-center mt-5">
                <button type="submit" class="btn btn-primary">
               Создать
                </button>
            </div>
        </div>

    </div>










</form>

<script>
document.addEventListener("DOMContentLoaded", function() {
    // ===== ЛОГОТИП =====
    const fileInputLogo = document.getElementById("id_cinema_form-main_image");
    const previewLogo = document.getElementById("mainImagePreview");
    const uploadLogoBtn = document.getElementById("uploadLogoBtn");
    const deleteLogoBtn = document.getElementById("deleteLogoBtn");

    uploadLogoBtn.onclick = () => fileInputLogo.click();
    fileInputLogo.onchange = () => {
        const file = fileInputLogo.files[0];
        if (!file) return;
        previewLogo.src = URL.createObjectURL(file);
    };
    deleteLogoBtn.onclick = () => {
        fileInputLogo.value = "";
        previewLogo.src = "https://www.nomadfoods.com/wp-content/uploads/2018/08/placeholder-1-e1533569576673-960x960.png";
    };

    // ===== БАННЕР =====
    const fileInputBanner = document.getElementById("id_cinema_form-image_top_banner");
    const previewBanner = document.getElementById("previewBanner");
    const uploadBannerBtn = document.getElementById("uploadBannerBtn");
    const deleteBannerBtn = document.getElementById("deleteBannerBtn");

    uploadBannerBtn.onclick = () => fileInputBanner.click();
    fileInputBanner.onchange = () => {
        const file = fileInputBanner.files[0];
        if (!file) return;
        previewBanner.src = URL.createObjectURL(file);
    };
    deleteBannerBtn.onclick = () => {
        fileInputBanner.value = "";
        previewBanner.src = "https://www.nomadfoods.com/wp-content/uploads/2018/08/placeholder-1-e1533569576673-960x960.png";
    };
});
</script>


{% endblock%}